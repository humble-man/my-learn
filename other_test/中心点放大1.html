<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>中心点放大1</title>
		<style type="text/css">
			div {
				width: 100px;
				height: 100px;
				margin: 0;
				background-color: red;
				filter: aplha(opacity:50);
				opacity: 0.5;
				position: absolute;
				top: 200px;
				left: 500px;
			}
		</style>
		<script type="text/javascript">
			
			
			//获取运动物体的属性的值   例如：width 值    obj（需要运动的物体对象）   shuxingz(属性的值）
			function getstyle(obj, shuxingz) {
				
				//考虑浏览器的兼容性问题  个别浏览器无法使用currentStyle 获取对象的样式
				if(obj.currentStyle) {
					return obj.currentStyle[shuxingz];
				} else {
					return getComputedStyle(obj, false)[shuxingz];
				}
			}

			//物体的运动方法  obj（要运动的对象）  json（ 对象要运动的属性：对象要运动的属性值）  fn(对象运动后需要执行的下一步方法)）
			function start(obj, json, fn) {
				
				//执行运动方法之前  先清除定时器
				clearInterval(obj.timer);
				
				//给对象设定时器 实现动画
				obj.timer = setInterval(function() {
					var bStop = true;
					
					//循环遍历json 对象   mubiao 就是 json 对象数据中的 属性
					for(var mubiao in json) {
						
						//判断属性是否是  透明度  做浏览器兼容性处理
						if(mubiao == "opacity") {
							var iCu = parseInt(parseFloat(getstyle(obj, '' + mubiao)) * 100);
						} else {
							var iCu = parseInt(getstyle(obj, '' + mubiao));
						}
						
						
						//给动画添加初始速度
						var isSpeed = (json[mubiao] - iCu) / 8;
						
						//速度的取整
						isSpeed = isSpeed > 0 ? Math.ceil(isSpeed) : Math.floor(isSpeed);

						
						//如果当前对象属性值有一个没有达到相应的目标值  则不关闭定时器
						if(iCu != json[mubiao]) {
							
							bStop = false;
						}
						
						
						//动态修改物体的当前属性值 以此实现物体的运动
						if(mubiao == "opacity") {
							obj.style.filter = 'alpha(opacity:' + (iCu + isSpeed) + ')';
							obj.style.opacity = (iCu + isSpeed) / 100;
						} else {
							obj.style[mubiao] = iCu + isSpeed + 'px';
						}
						
						
					}

					//如果对象当前属性值都已经达到目标值,关闭定时器					
					if(bStop) {
						clearInterval(obj.timer);
						if(fn) {
							fn();
						}
					}

				}, 30);
			}

			window.onload = function() {
				var oDiv = document.getElementById('div1');
				oDiv.onmousemove = function() {
					start(oDiv, {
						width: 300,
						height: 300,
						opacity: 100,
						marginLeft:-100,
						marginTop:-100
					})
				}
				oDiv.onmouseout = function() {
					start(oDiv, {
						width: 100,
						height: 100,
						opacity: 50,
						marginLeft:0,
						marginTop:0
					})
				}
			}
		</script>
	</head>

	<body>
		<div id="div1"></div>
	</body>

</html>